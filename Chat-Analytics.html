<!DOCTYPE html>
<html>
<head>
  <title>Message Analytics</title>
</head>
<body>
    <!DOCTYPE html>
    <html>
    <head>
      <title>Message Analytics</title>
    </head>
    <body>
      <h1>Message Analytics</h1>
    
      <div id="analyticsResults"> </div>
    
      <script>
        const jsonUrl = 'result.json';
        fetch(jsonUrl)
          .then(response => response.json())
          .then(messages => {
            const sentWords = {};
    
            messages.forEach((message) => {
              if (message.sender === 'user') {
                const words = message.text.split(' ');
    
                words.forEach((word) => {
                  const trimmedWord = word.trim().toLowerCase();
                  if (trimmedWord.length > 0) {
                    sentWords[trimmedWord] = (sentWords[trimmedWord] || 0) + 1;
                  }
                });
              }
            });
    
            const topSentWords = Object.entries(sentWords)
              .sort((a, b) => b[1] - a[1])
              .slice(0, 5);
    
            const totalMessagesSent = messages.filter((message) => message.sender === 'user').length;
    
            const totalMessagesReceived = messages.filter((message) => message.sender !== 'user').length;
    
            const sentCharacterCount = messages.reduce((count, message) => {
              if (message.sender === 'user') {
                return count + message.text.length;
              }
              return count;
            }, 0);
    
            const averageCharacterLengthSent = sentCharacterCount / totalMessagesSent;
    
            const receivedCharacterCount = messages.reduce((count, message) => {
              if (message.sender !== 'user') {
                return count + message.text.length;
              }
              return count;
            }, 0);
    
            const averageCharacterLengthReceived = receivedCharacterCount / totalMessagesReceived;
    
            const analyticsResultsDiv = document.getElementById('analyticsResults');
    
            analyticsResultsDiv.innerHTML = `
              <h2>Analytics Results</h2>
              <p>Total Messages Sent: ${totalMessagesSent}</p>
              <p>Total Messages Received: ${totalMessagesReceived}</p>
              <p>Average Character Length Sent: ${averageCharacterLengthSent.toFixed(2)}</p>
              <p>Average Character Length Received: ${averageCharacterLengthReceived.toFixed(2)}</p>
              <h3>Top 5 Sent Words:</h3>
              <ul>
                ${topSentWords.map(([word, count]) => `<li>${word}: ${count}</li>`).join('')}
              </ul>
            `;
          })
          .catch(error => console.error('Error:', error));
  </script>
</body>
</html>
